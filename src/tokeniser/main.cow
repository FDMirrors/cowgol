init_tokeniser();

var tokens_fd: uint8 := file_openout("tokens.dat");
var tokens_count: uint16 := 0;
while current_token != 0 loop
    var buf: uint16[1];
    buf[0] := current_token;
    tokens_count := tokens_count + 1;
    file_putblock(tokens_fd, &buf[0] as [int8], 2);
    next_token();
end loop;

print("tokens read: ");
print_i16(tokens_count);
print_newline();

print("thing table size: ");
print_i16(thing_table_top);
print_newline();
save_thing_table("things.dat");
