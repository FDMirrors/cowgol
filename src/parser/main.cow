
var tokenfd: int8 := file_openout("tokens.dat");
var tokenbuf: uint16[1];

init_tokeniser();
while current_token != 0 loop
    tokenbuf[0] := current_token;
    file_putblock(tokenfd, &tokenbuf[0] as [int8], 2);
    next_token();
end loop;
file_close(tokenfd);

print("thing table size: ");
print_i16(thing_table_top);
print_newline();
save_thing_table("things.dat");
